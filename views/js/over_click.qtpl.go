/*
 * Copyright (c) 2023. Author: Ruslan Bikchentaev. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 * Перший приватний програміст.
 */

// Code generated by qtc from "over_click.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line over_click.qtpl:1
package js

//line over_click.qtpl:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line over_click.qtpl:1
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line over_click.qtpl:1
func StreamOverClick(qw422016 *qt422016.Writer) {
//line over_click.qtpl:1
	qw422016.N().S(`
function() {
     var $out = $('#content');
       $.ajax({
            url: url,
             data: {
                     "lang": lang,
                     "html": true
             },
            processData: false,
            contentType: false,
          beforeSend: function (xhr) {
              xhr.setRequestHeader('Authorization', 'Bearer ' + token);
              xhr.setRequestHeader('Content-Language', lang);
          },
          success: function (data, status, xhr) {
              switch (xhr.status) {
              case 204: {
                alert("no content!"+status)
                return
              }
              case 206: {
                OverHijack($out, data);
                return
              }
              }

             var disp = xhr.getResponseHeader('Content-Disposition');
             var typeCnt = xhr.getResponseHeader('Content-Type');
             if (disp && disp.search('attachment') != -1) {

                //var blob = new Blob([data], {type: typeCnt});
                //var URL = window.URL || window.webkitURL;
				data = "<img src='" + url + "'/>";
			} else if (typeCnt.startsWith("text/css") ) {
				var id = xhr.getResponseHeader('Section-Name');
				LoadStyles(id, data)
				return;
			} else if (typeCnt.startsWith("application/json") ) {
				    $('#content').html(JSON.stringify(data) )
				return;
			}
			if (target !== "_modal") {
				PutContent(data, url);
			} else {
				fancyOpen(data);
			}
          },
          error: function (xhr, status, error) {
              if (xhr.status == 401) {
                urlAfterLogin = url;
                $('#bLogin').trigger("click");
               return;
              }

              alert( "Code : " + xhr.status + ", "+ error + ": "+ xhr.responseText);
              console.log(xhr);
          }
         });
         return false;
}
`)
//line over_click.qtpl:63
}

//line over_click.qtpl:63
func WriteOverClick(qq422016 qtio422016.Writer) {
//line over_click.qtpl:63
	qw422016 := qt422016.AcquireWriter(qq422016)
//line over_click.qtpl:63
	StreamOverClick(qw422016)
//line over_click.qtpl:63
	qt422016.ReleaseWriter(qw422016)
//line over_click.qtpl:63
}

//line over_click.qtpl:63
func OverClick() string {
//line over_click.qtpl:63
	qb422016 := qt422016.AcquireByteBuffer()
//line over_click.qtpl:63
	WriteOverClick(qb422016)
//line over_click.qtpl:63
	qs422016 := string(qb422016.B)
//line over_click.qtpl:63
	qt422016.ReleaseByteBuffer(qb422016)
//line over_click.qtpl:63
	return qs422016
//line over_click.qtpl:63
}
