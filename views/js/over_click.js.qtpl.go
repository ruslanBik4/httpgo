// Code generated by qtc from "over_click.js.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line over_click.js.qtpl:1
package js

//line over_click.js.qtpl:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line over_click.js.qtpl:1
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line over_click.js.qtpl:1
func StreamOverClick(qw422016 *qt422016.Writer) {
//line over_click.js.qtpl:1
	qw422016.N().S(`	`)
//line over_click.js.qtpl:2
	qw422016.N().S(`/*
 * Copyright (c) 2023. Author: Ruslan Bikchentaev. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 * Перший приватний програміст. 
 */
function OverClick() {
    var $out = $('#content');
    let url = replMacros(this.href);
    let target = this.target;
    $.ajax({
        url: url,
        data: {
            "lang": lang,
            "html": true
        },
        processData: false,
        contentType: false,
        beforeSend: getHeaders,
        success: function (data, status, xhr) {
            switch (xhr.status) {
                case 204: {
                    alert("no content!" + status)
                    return
                }
                case 206: {
                    OverHijack($out, data);
                    return
                }
            }

            var disp = xhr.getResponseHeader('Content-Disposition');
            var typeCnt = xhr.getResponseHeader('Content-Type');
            if (disp && disp.search('attachment') !== -1) {

                var blob = new Blob([data], {type: typeCnt});
                var a = document.createElement('a');
                a.href = window.URL.createObjectURL(blob);
                a.download = 'file.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);

                data = `)
//line over_click.js.qtpl:2
	qw422016.N().S("`")
//line over_click.js.qtpl:2
	qw422016.N().S(`<img src='data:${data}' alt='${url}'/>`)
//line over_click.js.qtpl:2
	qw422016.N().S("`")
//line over_click.js.qtpl:2
	qw422016.N().S(`;
            } else if (typeCnt.startsWith("text/css")) {
                var id = xhr.getResponseHeader('Section-Name');
                LoadStyles(id, data)
                return;
            } else if (typeCnt.startsWith("application/json")) {
                $('#content').html(JSON.stringify(data))
                return;
            }
            if (target === "_modal") {
                fancyOpen(data);
            } else {
                PutContent(data, url);
            }
        },
        error: function (xhr, status, error) {
            if (xhr.status === 401) {
                urlAfterLogin = url;
                $('#bLogin').trigger("click");
                return;
            }

            alert(`)
//line over_click.js.qtpl:2
	qw422016.N().S("`")
//line over_click.js.qtpl:2
	qw422016.N().S(`Code : "${xhr.status}", "${error}": "${xhr.responseText}"`)
//line over_click.js.qtpl:2
	qw422016.N().S("`")
//line over_click.js.qtpl:2
	qw422016.N().S(`);
            console.log(xhr);
        }
    });
    return false;
}

//replace special symbols
function replMacros(url) {
    return url.replace(/{page}/, GetPageLines())
}

function getHeaders(xhr) {
    xhr.setRequestHeader('Authorization', 'Bearer ' + token);
    xhr.setRequestHeader('Accept-Language', lang);
}`)
//line over_click.js.qtpl:2
	qw422016.N().S(`
`)
//line over_click.js.qtpl:3
}

//line over_click.js.qtpl:3
func WriteOverClick(qq422016 qtio422016.Writer) {
//line over_click.js.qtpl:3
	qw422016 := qt422016.AcquireWriter(qq422016)
//line over_click.js.qtpl:3
	StreamOverClick(qw422016)
//line over_click.js.qtpl:3
	qt422016.ReleaseWriter(qw422016)
//line over_click.js.qtpl:3
}

//line over_click.js.qtpl:3
func OverClick() string {
//line over_click.js.qtpl:3
	qb422016 := qt422016.AcquireByteBuffer()
//line over_click.js.qtpl:3
	WriteOverClick(qb422016)
//line over_click.js.qtpl:3
	qs422016 := string(qb422016.B)
//line over_click.js.qtpl:3
	qt422016.ReleaseByteBuffer(qb422016)
//line over_click.js.qtpl:3
	return qs422016
//line over_click.js.qtpl:3
}
