/*
 * Copyright (c) 2024. Author: Ruslan Bikchentaev. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 * Перший приватний програміст.
 */

// Code generated by qtc from "formField.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line formField.qtpl:1
package forms

//line formField.qtpl:1
import (
	"fmt"
	"slices"

	"github.com/iancoleman/strcase"
)

//line formField.qtpl:9
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line formField.qtpl:9
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line formField.qtpl:9
func (f *FormField) StreamCreate(qw422016 *qt422016.Writer, repo, packageName, unitName string) {
//line formField.qtpl:9
	qw422016.N().S(`// Code generated by httpgo-gen-go. DO NOT EDIT.

package `)
//line formField.qtpl:12
	qw422016.E().S(packageName)
//line formField.qtpl:12
	qw422016.N().S(`

import (
    "go/types"

	"github.com/ruslanBik4/httpgo/apis/crud"
    "github.com/ruslanBik4/httpgo/views/templates/forms"
	"github.com/ruslanBik4/dbEngine/dbEngine"
    "github.com/ruslanBik4/logs"
	"github.com/ruslanBik4/httpgo/apis"
	"github.com/ruslanBik4/httpgo/views"

	"github.com/valyala/fasthttp"
	 "`)
//line formField.qtpl:25
	qw422016.E().S(repo)
//line formField.qtpl:25
	qw422016.N().S(`/api"
	 "`)
//line formField.qtpl:26
	qw422016.E().S(repo)
//line formField.qtpl:26
	qw422016.N().S(`/db"
)

`)
//line formField.qtpl:30
	blocks := f.Blocks[0].Columns
	for _, block := range f.Blocks[1:] {
		for _, col := range block.Columns {
			if !slices.Contains(blocks, col) {
				blocks = append(blocks, col)
			}
		}
	}

//line formField.qtpl:38
	qw422016.N().S(`// `)
//line formField.qtpl:39
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:39
	qw422016.N().S(` params on routes for CRUD table '
var (
	`)
//line formField.qtpl:41
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:41
	qw422016.N().S(`GetParams = append(crud.APIQueriesParams,
`)
//line formField.qtpl:42
	for _, col := range blocks {
//line formField.qtpl:42
		qw422016.N().S(`        apis.InParam{
`)
//line formField.qtpl:44
		if col.Column != nil {
//line formField.qtpl:44
			qw422016.N().S(`            Name: "`)
//line formField.qtpl:45
			qw422016.N().S(col.Name())
//line formField.qtpl:45
			qw422016.N().S(`",
`)
//line formField.qtpl:46
			if col.Value != nil && col.Value != "nil" {
//line formField.qtpl:46
				qw422016.N().S(`            DefValue: `)
//line formField.qtpl:46
				qw422016.N().S("`")
//line formField.qtpl:47
				qw422016.E().V(col.Value)
//line formField.qtpl:47
				qw422016.N().S(``)
//line formField.qtpl:47
				qw422016.N().S("`")
//line formField.qtpl:47
				qw422016.N().S(`,
`)
//line formField.qtpl:48
			}
//line formField.qtpl:48
			qw422016.N().S(`            Type: apis.NewTypeInParam(`)
//line formField.qtpl:49
			if col.InputType == "number" {
//line formField.qtpl:49
				qw422016.N().S(`types.Int32`)
//line formField.qtpl:49
			} else {
//line formField.qtpl:49
				qw422016.N().S(`types.String`)
//line formField.qtpl:49
			}
//line formField.qtpl:49
			qw422016.N().S(`),
`)
//line formField.qtpl:50
		}
//line formField.qtpl:50
		qw422016.N().S(`        },
`)
//line formField.qtpl:52
	}
//line formField.qtpl:52
	qw422016.N().S(`   )
)

var ShowForm`)
//line formField.qtpl:56
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:56
	qw422016.N().S(`Route = &apis.ApiRoute{
            Desc:   "# show form *`)
//line formField.qtpl:57
	qw422016.E().S(f.Title)
//line formField.qtpl:57
	qw422016.N().S(` `)
//line formField.qtpl:57
	qw422016.E().S(f.Description)
//line formField.qtpl:57
	qw422016.N().S(` ",
            Fnc: HandleShowForms`)
//line formField.qtpl:58
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:58
	qw422016.N().S(`,
            Method: apis.GET,
            IsAJAXRequest: true,
			Params: `)
//line formField.qtpl:61
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:61
	qw422016.N().S(`GetParams,
    }
// HandleShowForms is handle for show form '`)
//line formField.qtpl:63
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:63
	qw422016.N().S(`'
func HandleShowForms`)
//line formField.qtpl:64
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:64
	qw422016.N().S(`(ctx *fasthttp.RequestCtx) (any, error) {
    DB, ok := ctx.UserValue(apis.Database).(*db.Database)
    if !ok {
        logs.ErrorLog(dbEngine.ErrDBNotFound)
        return nil, dbEngine.ErrDBNotFound
    }

    patternList, _ := DB.NewPatternsList(ctx)
	views.WriteHeadersHTML(ctx)

	return RenderForm`)
//line formField.qtpl:74
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:74
	qw422016.N().S(`(ctx, patternList)
}

func RenderForm`)
//line formField.qtpl:77
	qw422016.E().S(strcase.ToCamel(unitName))
//line formField.qtpl:77
	qw422016.N().S(`(ctx *fasthttp.RequestCtx, patternList dbEngine.Table) (any, error) {

	f := forms.FormField {
        	Action: "`)
//line formField.qtpl:80
	qw422016.E().S(f.Action)
//line formField.qtpl:80
	qw422016.N().S(`",
        	Classes: "`)
//line formField.qtpl:81
	qw422016.E().S(f.Classes)
//line formField.qtpl:81
	qw422016.N().S(`",
        	Method: "`)
//line formField.qtpl:82
	qw422016.E().S(f.Method)
//line formField.qtpl:82
	qw422016.N().S(`",
        	Description: api.Translate(ctx, "`)
//line formField.qtpl:83
	qw422016.N().S(f.Description)
//line formField.qtpl:83
	qw422016.N().S(`"),
`)
//line formField.qtpl:84
	if f.HideBlock != nil {
//line formField.qtpl:84
		qw422016.N().S(`        	HideBlock: `)
//line formField.qtpl:85
		qw422016.N().S(fmt.Sprintf("%#v", f.HideBlock))
//line formField.qtpl:85
		qw422016.N().S(`,
`)
//line formField.qtpl:86
	}
//line formField.qtpl:87
	if f.Title > "" {
//line formField.qtpl:87
		qw422016.N().S(`        	Title: api.Translate(ctx, "`)
//line formField.qtpl:88
		qw422016.N().S(f.Title)
//line formField.qtpl:88
		qw422016.N().S(`"),
`)
//line formField.qtpl:89
	}
//line formField.qtpl:89
	qw422016.N().S(`        	Blocks: []forms.BlockColumns{
`)
//line formField.qtpl:91
	for _, block := range f.Blocks {
//line formField.qtpl:91
		qw422016.N().S(`                {
                   Id: `)
//line formField.qtpl:93
		qw422016.N().D(block.Id)
//line formField.qtpl:93
		qw422016.N().S(`,
                   Title: api.Translate(ctx, "`)
//line formField.qtpl:94
		qw422016.N().S(block.Title)
//line formField.qtpl:94
		qw422016.N().S(`"),
                   Description: api.Translate(ctx, "`)
//line formField.qtpl:95
		qw422016.N().S(block.Description)
//line formField.qtpl:95
		qw422016.N().S(`"),
`)
//line formField.qtpl:96
		if block.Classes > "" {
//line formField.qtpl:96
			qw422016.N().S(`                   Classes: "`)
//line formField.qtpl:97
			qw422016.E().S(block.Classes)
//line formField.qtpl:97
			qw422016.N().S(`",
`)
//line formField.qtpl:98
		}
//line formField.qtpl:99
		if block.Multiple {
//line formField.qtpl:99
			qw422016.N().S(`                   Multiple: true,
`)
//line formField.qtpl:101
		}
//line formField.qtpl:102
		if len(block.Columns) > 0 {
//line formField.qtpl:102
			qw422016.N().S(`                   Columns: []*forms.ColumnDecor{
`)
//line formField.qtpl:104
			for _, col := range block.Columns {
//line formField.qtpl:104
				qw422016.N().S(`                        {
`)
//line formField.qtpl:106
				if col.Column != nil {
//line formField.qtpl:106
					qw422016.N().S(`                            Column: dbEngine.NewStringColumn("`)
//line formField.qtpl:107
					qw422016.N().S(col.Name())
//line formField.qtpl:107
					qw422016.N().S(`", api.Translate(ctx, "`)
//line formField.qtpl:107
					qw422016.N().S(col.Comment())
//line formField.qtpl:107
					qw422016.N().S(`"), `)
//line formField.qtpl:107
					qw422016.E().V(col.Required())
//line formField.qtpl:107
					qw422016.N().S(`),
                            Value: ctx.UserValue("`)
//line formField.qtpl:108
					qw422016.N().S(col.Name())
//line formField.qtpl:108
					qw422016.N().S(`"),
`)
//line formField.qtpl:109
				}
//line formField.qtpl:110
				if len(col.Events) > 0 {
//line formField.qtpl:110
					qw422016.N().S(`                            Events:  map[string]string{
`)
//line formField.qtpl:112
					for key, event := range col.Events {
//line formField.qtpl:112
						qw422016.N().S(`							         "`)
//line formField.qtpl:113
						qw422016.E().S(key)
//line formField.qtpl:113
						qw422016.N().S(`": `)
//line formField.qtpl:113
						qw422016.N().S("`")
//line formField.qtpl:113
						qw422016.N().S(event)
//line formField.qtpl:113
						qw422016.N().S(``)
//line formField.qtpl:113
						qw422016.N().S("`")
//line formField.qtpl:113
						qw422016.N().S(`,
`)
//line formField.qtpl:114
					}
//line formField.qtpl:114
					qw422016.N().S(`							       },
`)
//line formField.qtpl:116
				}
//line formField.qtpl:117
				if col.Accept > "" {
//line formField.qtpl:117
					qw422016.N().S(`                            Accept: "`)
//line formField.qtpl:118
					qw422016.E().S(col.Accept)
//line formField.qtpl:118
					qw422016.N().S(`",
`)
//line formField.qtpl:119
				}
//line formField.qtpl:120
				if col.IsHidden {
//line formField.qtpl:120
					qw422016.N().S(`                            IsHidden: `)
//line formField.qtpl:121
					qw422016.E().V(col.IsHidden)
//line formField.qtpl:121
					qw422016.N().S(`,
`)
//line formField.qtpl:122
				}
//line formField.qtpl:123
				if col.IsDisabled {
//line formField.qtpl:123
					qw422016.N().S(`                            IsDisabled: `)
//line formField.qtpl:124
					qw422016.E().V(col.IsDisabled)
//line formField.qtpl:124
					qw422016.N().S(`,
`)
//line formField.qtpl:125
				}
//line formField.qtpl:126
				if col.IsReadOnly {
//line formField.qtpl:126
					qw422016.N().S(`                            IsReadOnly: `)
//line formField.qtpl:127
					qw422016.E().V(col.IsReadOnly)
//line formField.qtpl:127
					qw422016.N().S(`,
`)
//line formField.qtpl:128
				}
//line formField.qtpl:129
				if col.IsSlice {
//line formField.qtpl:129
					qw422016.N().S(`                            IsSlice: `)
//line formField.qtpl:130
					qw422016.E().V(col.IsSlice)
//line formField.qtpl:130
					qw422016.N().S(`,
`)
//line formField.qtpl:131
				}
//line formField.qtpl:132
				if col.IsNewPrimary {
//line formField.qtpl:132
					qw422016.N().S(`                            IsNewPrimary: `)
//line formField.qtpl:133
					qw422016.E().V(col.IsNewPrimary)
//line formField.qtpl:133
					qw422016.N().S(`,
`)
//line formField.qtpl:134
				}
//line formField.qtpl:135
				if col.SelectWithNew {
//line formField.qtpl:135
					qw422016.N().S(`                            SelectWithNew: `)
//line formField.qtpl:136
					qw422016.E().V(col.SelectWithNew)
//line formField.qtpl:136
					qw422016.N().S(`,
`)
//line formField.qtpl:137
				}
//line formField.qtpl:138
				if col.ExtProperties != nil {
//line formField.qtpl:138
					qw422016.N().S(`                            ExtProperties: `)
//line formField.qtpl:139
					qw422016.N().S(fmt.Sprintf("%+#v", col.ExtProperties))
//line formField.qtpl:139
					qw422016.N().S(`,
`)
//line formField.qtpl:140
				}
//line formField.qtpl:140
				qw422016.N().S(`                            InputType: "`)
//line formField.qtpl:141
				qw422016.N().S(col.InputType)
//line formField.qtpl:141
				qw422016.N().S(`",
`)
//line formField.qtpl:142
				if col.SpecialInputName > "" {
//line formField.qtpl:142
					qw422016.N().S(`                            SpecialInputName: "`)
//line formField.qtpl:143
					qw422016.N().S(col.SpecialInputName)
//line formField.qtpl:143
					qw422016.N().S(`",
`)
//line formField.qtpl:144
				}
//line formField.qtpl:145
				if col.DefaultInputValue > "" {
//line formField.qtpl:145
					qw422016.N().S(`                            DefaultInputValue: "`)
//line formField.qtpl:146
					qw422016.N().S(col.DefaultInputValue)
//line formField.qtpl:146
					qw422016.N().S(`",
`)
//line formField.qtpl:147
				}
//line formField.qtpl:148
				if len(col.Attachments) > 0 {
//line formField.qtpl:148
					qw422016.N().S(`                            Attachments: `)
//line formField.qtpl:149
					qw422016.N().S(fmt.Sprintf("%+#v", col.Attachments))
//line formField.qtpl:149
					qw422016.N().S(`,
`)
//line formField.qtpl:150
				}
//line formField.qtpl:150
				qw422016.N().S(`                            PatternList: patternList,
`)
//line formField.qtpl:152
				if col.SelectOptions != nil && len(col.SelectOptions) > 0 {
//line formField.qtpl:152
					qw422016.N().S(`                            SelectOptions: `)
//line formField.qtpl:153
					qw422016.N().S(fmt.Sprintf("%+#v", col.SelectOptions))
//line formField.qtpl:153
					qw422016.N().S(`,
`)
//line formField.qtpl:154
				}
//line formField.qtpl:155
				if col.PatternName > "" {
//line formField.qtpl:155
					qw422016.N().S(`                            PatternName: `)
//line formField.qtpl:155
					qw422016.N().S("`")
//line formField.qtpl:156
					qw422016.N().S(col.PatternName)
//line formField.qtpl:156
					qw422016.N().S(``)
//line formField.qtpl:156
					qw422016.N().S("`")
//line formField.qtpl:156
					qw422016.N().S(`,
`)
//line formField.qtpl:157
				}
//line formField.qtpl:158
				if col.PlaceHolder > "" {
//line formField.qtpl:158
					qw422016.N().S(`                            PlaceHolder: "`)
//line formField.qtpl:159
					qw422016.N().S(col.PlaceHolder)
//line formField.qtpl:159
					qw422016.N().S(`",
`)
//line formField.qtpl:160
				}
//line formField.qtpl:161
				if col.LinkNew > "" {
//line formField.qtpl:161
					qw422016.N().S(`                            LinkNew: "`)
//line formField.qtpl:162
					qw422016.N().S(col.LinkNew)
//line formField.qtpl:162
					qw422016.N().S(`",
`)
//line formField.qtpl:163
				}
//line formField.qtpl:163
				qw422016.N().S(`                            Label: api.Translate(ctx, "`)
//line formField.qtpl:164
				qw422016.N().S(col.Label)
//line formField.qtpl:164
				qw422016.N().S(`"),
`)
//line formField.qtpl:165
				if col.Suggestions > "" {
//line formField.qtpl:165
					qw422016.N().S(`                            Suggestions: `)
//line formField.qtpl:165
					qw422016.N().S("`")
//line formField.qtpl:166
					qw422016.E().V(col.Suggestions)
//line formField.qtpl:166
					qw422016.N().S(``)
//line formField.qtpl:166
					qw422016.N().S("`")
//line formField.qtpl:166
					qw422016.N().S(`,
`)
//line formField.qtpl:167
				}
//line formField.qtpl:168
				if col.SuggestionsParams != nil && len(col.SuggestionsParams) > 0 {
//line formField.qtpl:168
					qw422016.N().S(`                            SuggestionsParams: `)
//line formField.qtpl:169
					qw422016.N().S(fmt.Sprintf("%+#v", col.SuggestionsParams))
//line formField.qtpl:169
					qw422016.N().S(`,
`)
//line formField.qtpl:170
				}
//line formField.qtpl:170
				qw422016.N().S(`                        },
`)
//line formField.qtpl:172
			}
//line formField.qtpl:172
			qw422016.N().S(`                        },
`)
//line formField.qtpl:174
		}
//line formField.qtpl:175
		if len(block.Buttons) > 0 {
//line formField.qtpl:175
			qw422016.N().S(`                    Buttons:[]forms.Button{
`)
//line formField.qtpl:177
			for _, btn := range block.Buttons {
//line formField.qtpl:177
				qw422016.N().S(`                            forms.Button{
                                Id: "`)
//line formField.qtpl:179
				qw422016.E().S(btn.Id)
//line formField.qtpl:179
				qw422016.N().S(`",
`)
//line formField.qtpl:180
				if btn.Classes > "" {
//line formField.qtpl:180
					qw422016.N().S(`	                            Classes:      api.Translate(ctx, `)
//line formField.qtpl:180
					qw422016.N().S("`")
//line formField.qtpl:181
					qw422016.N().S(btn.Classes)
//line formField.qtpl:181
					qw422016.N().S(``)
//line formField.qtpl:181
					qw422016.N().S("`")
//line formField.qtpl:181
					qw422016.N().S(`),
`)
//line formField.qtpl:182
				}
//line formField.qtpl:183
				if btn.Hidden {
//line formField.qtpl:183
					qw422016.N().S(`	                            Hidden: true,
`)
//line formField.qtpl:185
				}
//line formField.qtpl:186
				if btn.Position {
//line formField.qtpl:186
					qw422016.N().S(`	                            Position: true,
`)
//line formField.qtpl:188
				}
//line formField.qtpl:189
				if btn.Title > "" {
//line formField.qtpl:189
					qw422016.N().S(`	                            Title:      api.Translate(ctx, `)
//line formField.qtpl:189
					qw422016.N().S("`")
//line formField.qtpl:190
					qw422016.N().S(btn.Title)
//line formField.qtpl:190
					qw422016.N().S(``)
//line formField.qtpl:190
					qw422016.N().S("`")
//line formField.qtpl:190
					qw422016.N().S(`),
`)
//line formField.qtpl:191
				}
//line formField.qtpl:192
				if btn.Type > "" {
//line formField.qtpl:192
					qw422016.N().S(`	                            Type:       "`)
//line formField.qtpl:193
					qw422016.N().S(btn.Type)
//line formField.qtpl:193
					qw422016.N().S(`",
`)
//line formField.qtpl:194
				}
//line formField.qtpl:195
				if btn.OnClick > "" {
//line formField.qtpl:195
					qw422016.N().S(`	                            OnClick:    `)
//line formField.qtpl:195
					qw422016.N().S("`")
//line formField.qtpl:196
					qw422016.N().S(btn.OnClick)
//line formField.qtpl:196
					qw422016.N().S(``)
//line formField.qtpl:196
					qw422016.N().S("`")
//line formField.qtpl:196
					qw422016.N().S(`,
`)
//line formField.qtpl:197
				}
//line formField.qtpl:197
				qw422016.N().S(`                            },
`)
//line formField.qtpl:199
			}
//line formField.qtpl:199
			qw422016.N().S(`                    },
`)
//line formField.qtpl:201
		}
//line formField.qtpl:201
		qw422016.N().S(`                },
`)
//line formField.qtpl:203
	}
//line formField.qtpl:203
	qw422016.N().S(`            },
        }

	f.WriteRenderForm( ctx.Response.BodyWriter(), true)

    return nil, nil
}
`)
//line formField.qtpl:211
}

//line formField.qtpl:211
func (f *FormField) WriteCreate(qq422016 qtio422016.Writer, repo, packageName, unitName string) {
//line formField.qtpl:211
	qw422016 := qt422016.AcquireWriter(qq422016)
//line formField.qtpl:211
	f.StreamCreate(qw422016, repo, packageName, unitName)
//line formField.qtpl:211
	qt422016.ReleaseWriter(qw422016)
//line formField.qtpl:211
}

//line formField.qtpl:211
func (f *FormField) Create(repo, packageName, unitName string) string {
//line formField.qtpl:211
	qb422016 := qt422016.AcquireByteBuffer()
//line formField.qtpl:211
	f.WriteCreate(qb422016, repo, packageName, unitName)
//line formField.qtpl:211
	qs422016 := string(qb422016.B)
//line formField.qtpl:211
	qt422016.ReleaseByteBuffer(qb422016)
//line formField.qtpl:211
	return qs422016
//line formField.qtpl:211
}
