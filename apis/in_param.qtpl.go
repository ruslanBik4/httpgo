// Code generated by qtc from "in_param.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line in_param.qtpl:1
package apis

//line in_param.qtpl:1
import (
	"go/types"

	jsoniter "github.com/json-iterator/go"

	"github.com/ruslanBik4/httpgo/typesExt"
	"github.com/ruslanBik4/httpgo/views/templates/json"
	"github.com/ruslanBik4/logs"
)

//line in_param.qtpl:13
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line in_param.qtpl:13
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line in_param.qtpl:14
type qInParam struct {
	in        string
	dto       any
	multiPart bool
}

func NewqInParam(in string, dto any) *qInParam {
	return &qInParam{
		in:        in,
		dto:       dto,
		multiPart: in == "body",
	}
}

//line in_param.qtpl:32
func (q *qInParam) StreamSwaggerParams(qw422016 *qt422016.Writer, params []any) {
//line in_param.qtpl:33
	if !q.multiPart {
//line in_param.qtpl:34
		if q.dto != nil {
//line in_param.qtpl:34
			qw422016.N().S(`"requestBody": {"content": {"application/json": {"schema":`)
//line in_param.qtpl:38
			json.StreamWrap(qw422016, q.dto)
//line in_param.qtpl:38
			qw422016.N().S(`},},},`)
//line in_param.qtpl:42
		}
//line in_param.qtpl:42
		qw422016.N().S(`"parameters":[`)
//line in_param.qtpl:43
		q.streamswaggerParams(qw422016, params)
//line in_param.qtpl:43
		qw422016.N().S(`]`)
//line in_param.qtpl:44
	} else {
//line in_param.qtpl:44
		qw422016.N().S(`"requestBody": {"content": {`)
//line in_param.qtpl:47
		if q.dto != nil {
//line in_param.qtpl:47
			qw422016.N().S(`"application/json": {"schema":`)
//line in_param.qtpl:49
			json.StreamWrap(qw422016, q.dto)
//line in_param.qtpl:49
			qw422016.N().S(`},`)
//line in_param.qtpl:51
		}
//line in_param.qtpl:51
		qw422016.N().S(`"multipart/form-data": {"schema": {"type": "object","properties": {`)
//line in_param.qtpl:55
		q.streamswaggerParams(qw422016, params)
//line in_param.qtpl:55
		qw422016.N().S(`}}}}}`)
//line in_param.qtpl:60
	}
//line in_param.qtpl:61
}

//line in_param.qtpl:61
func (q *qInParam) WriteSwaggerParams(qq422016 qtio422016.Writer, params []any) {
//line in_param.qtpl:61
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:61
	q.StreamSwaggerParams(qw422016, params)
//line in_param.qtpl:61
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:61
}

//line in_param.qtpl:61
func (q *qInParam) SwaggerParams(params []any) string {
//line in_param.qtpl:61
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:61
	q.WriteSwaggerParams(qb422016, params)
//line in_param.qtpl:61
	qs422016 := string(qb422016.B)
//line in_param.qtpl:61
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:61
	return qs422016
//line in_param.qtpl:61
}

//line in_param.qtpl:63
func (q *qInParam) streamswaggerParams(qw422016 *qt422016.Writer, params []any) {
//line in_param.qtpl:64
	for i, p := range params {
//line in_param.qtpl:65
		if i > 0 {
//line in_param.qtpl:65
			qw422016.N().S(`,`)
//line in_param.qtpl:65
		}
//line in_param.qtpl:67
		if param, ok := p.(InParam); ok {
//line in_param.qtpl:68
			if t, ok := param.Type.(jsoniter.ValEncoder); ok {
//line in_param.qtpl:70
				s, err := jsoniter.MarshalToString(t)
				if err != nil {
					logs.ErrorLog(err)
				}

//line in_param.qtpl:75
				qw422016.E().S(s)
//line in_param.qtpl:76
			} else {
//line in_param.qtpl:77
				if !q.multiPart {
//line in_param.qtpl:77
					qw422016.N().S(`{"name":"`)
//line in_param.qtpl:77
					qw422016.E().S(param.Name)
//line in_param.qtpl:77
					qw422016.N().S(`",`)
//line in_param.qtpl:78
				} else {
//line in_param.qtpl:78
					qw422016.N().S(`"`)
//line in_param.qtpl:78
					qw422016.E().S(param.Name)
//line in_param.qtpl:78
					qw422016.N().S(`":{`)
//line in_param.qtpl:79
				}
//line in_param.qtpl:79
				qw422016.N().S(`"description": "`)
//line in_param.qtpl:80
				qw422016.E().S(param.Desc)
//line in_param.qtpl:80
				qw422016.N().S(`",`)
//line in_param.qtpl:81
				if !q.multiPart {
//line in_param.qtpl:81
					qw422016.N().S(`"in": "`)
//line in_param.qtpl:82
					qw422016.E().S(q.in)
//line in_param.qtpl:82
					qw422016.N().S(`","schema": {`)
//line in_param.qtpl:84
				}
//line in_param.qtpl:85
				StreamSchema(qw422016, param)
//line in_param.qtpl:86
				if !q.multiPart {
//line in_param.qtpl:86
					qw422016.N().S(`}`)
//line in_param.qtpl:86
				}
//line in_param.qtpl:86
				qw422016.N().S(`}`)
//line in_param.qtpl:88
			}
//line in_param.qtpl:89
		} else {
//line in_param.qtpl:89
			qw422016.N().S(`{`)
//line in_param.qtpl:90
			json.StreamWrap(qw422016, p)
//line in_param.qtpl:90
			qw422016.N().S(`}`)
//line in_param.qtpl:91
		}
//line in_param.qtpl:92
	}
//line in_param.qtpl:93
}

//line in_param.qtpl:93
func (q *qInParam) writeswaggerParams(qq422016 qtio422016.Writer, params []any) {
//line in_param.qtpl:93
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:93
	q.streamswaggerParams(qw422016, params)
//line in_param.qtpl:93
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:93
}

//line in_param.qtpl:93
func (q *qInParam) swaggerParams(params []any) string {
//line in_param.qtpl:93
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:93
	q.writeswaggerParams(qb422016, params)
//line in_param.qtpl:93
	qs422016 := string(qb422016.B)
//line in_param.qtpl:93
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:93
	return qs422016
//line in_param.qtpl:93
}

//line in_param.qtpl:95
func (q *qInParam) StreamSwaggerProperties(qw422016 *qt422016.Writer, params []InParam) {
//line in_param.qtpl:95
	qw422016.N().S(`"properties": {`)
//line in_param.qtpl:97
	for i, param := range params {
//line in_param.qtpl:97
		qw422016.N().S(`"`)
//line in_param.qtpl:98
		qw422016.E().S(param.Name)
//line in_param.qtpl:98
		qw422016.N().S(`": {"description": "`)
//line in_param.qtpl:99
		qw422016.N().S(param.Desc)
//line in_param.qtpl:99
		qw422016.N().S(`",`)
//line in_param.qtpl:100
		StreamSchema(qw422016, param)
//line in_param.qtpl:100
		qw422016.N().S(`}`)
//line in_param.qtpl:101
		if i+1 < len(params) {
//line in_param.qtpl:101
			qw422016.N().S(`,`)
//line in_param.qtpl:101
		}
//line in_param.qtpl:102
	}
//line in_param.qtpl:102
	qw422016.N().S(`}`)
//line in_param.qtpl:104
}

//line in_param.qtpl:104
func (q *qInParam) WriteSwaggerProperties(qq422016 qtio422016.Writer, params []InParam) {
//line in_param.qtpl:104
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:104
	q.StreamSwaggerProperties(qw422016, params)
//line in_param.qtpl:104
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:104
}

//line in_param.qtpl:104
func (q *qInParam) SwaggerProperties(params []InParam) string {
//line in_param.qtpl:104
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:104
	q.WriteSwaggerProperties(qb422016, params)
//line in_param.qtpl:104
	qs422016 := string(qb422016.B)
//line in_param.qtpl:104
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:104
	return qs422016
//line in_param.qtpl:104
}

//line in_param.qtpl:105
func StreamBearer(qw422016 *qt422016.Writer, name, desc string) {
//line in_param.qtpl:105
	qw422016.N().S(`"components": {"securitySchemes": {"`)
//line in_param.qtpl:108
	qw422016.E().S(name)
//line in_param.qtpl:108
	qw422016.N().S(`":{"description": "`)
//line in_param.qtpl:109
	qw422016.E().J(desc)
//line in_param.qtpl:109
	qw422016.N().S(`","type": "http","scheme": "bearer","bearerFormat": "JWT",}}}`)
//line in_param.qtpl:116
}

//line in_param.qtpl:116
func WriteBearer(qq422016 qtio422016.Writer, name, desc string) {
//line in_param.qtpl:116
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:116
	StreamBearer(qw422016, name, desc)
//line in_param.qtpl:116
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:116
}

//line in_param.qtpl:116
func Bearer(name, desc string) string {
//line in_param.qtpl:116
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:116
	WriteBearer(qb422016, name, desc)
//line in_param.qtpl:116
	qs422016 := string(qb422016.B)
//line in_param.qtpl:116
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:116
	return qs422016
//line in_param.qtpl:116
}

//line in_param.qtpl:117
func StreamSchema(qw422016 *qt422016.Writer, param InParam) {
//line in_param.qtpl:119
	t, ok := (param.Type).(TypeInParam)

//line in_param.qtpl:121
	if param.Req {
//line in_param.qtpl:121
		qw422016.N().S(`"required": true,"allowEmptyValue": false,`)
//line in_param.qtpl:124
	}
//line in_param.qtpl:124
	qw422016.N().S(`"type":`)
//line in_param.qtpl:125
	switch {
//line in_param.qtpl:126
	case param.Type == nil:
//line in_param.qtpl:126
		qw422016.N().S(`nil`)
//line in_param.qtpl:127
	case ok && t.BasicKind == types.Bool:
//line in_param.qtpl:127
		qw422016.N().S(`"boolean"`)
//line in_param.qtpl:128
	case ok && t.BasicKind == types.UnsafePointer:
//line in_param.qtpl:128
		qw422016.N().S(`"file"`)
//line in_param.qtpl:129
	case ok && t.BasicKind == types.String:
//line in_param.qtpl:130
		if t.IsSlice() {
//line in_param.qtpl:130
			qw422016.N().S(`"array", "items": {"type": "string"}`)
//line in_param.qtpl:130
		} else {
//line in_param.qtpl:130
			qw422016.N().S(`"string"`)
//line in_param.qtpl:130
		}
//line in_param.qtpl:130
		qw422016.N().S(`,"format": 	"string"`)
//line in_param.qtpl:132
	case ok && t.BasicKind > types.Bool && t.BasicKind < types.Float32:
//line in_param.qtpl:132
		qw422016.N().S(`"integer","format": 	"`)
//line in_param.qtpl:133
		t.StreamFormat(qw422016)
//line in_param.qtpl:133
		qw422016.N().S(`"`)
//line in_param.qtpl:134
	case ok && (t.BasicKind == types.Float32 || t.BasicKind == types.Float64):
//line in_param.qtpl:134
		qw422016.N().S(`"number","format": 	"`)
//line in_param.qtpl:135
		t.StreamFormat(qw422016)
//line in_param.qtpl:135
		qw422016.N().S(`"`)
//line in_param.qtpl:136
	case ok && t.BasicKind > types.UnsafePointer:
//line in_param.qtpl:136
		qw422016.N().S(`"untyped","format": 	"`)
//line in_param.qtpl:137
		t.StreamFormat(qw422016)
//line in_param.qtpl:137
		qw422016.N().S(`"`)
//line in_param.qtpl:138
	case ok && t.BasicKind == typesExt.TStruct:
//line in_param.qtpl:138
		qw422016.N().S(`"`)
//line in_param.qtpl:138
		t.StreamRequestType(qw422016)
//line in_param.qtpl:138
		qw422016.N().S(`","format":   "`)
//line in_param.qtpl:139
		t.StreamFormat(qw422016)
//line in_param.qtpl:139
		qw422016.N().S(`"`)
//line in_param.qtpl:140
	case ok:
//line in_param.qtpl:140
		qw422016.N().S(`"`)
//line in_param.qtpl:140
		t.StreamFormat(qw422016)
//line in_param.qtpl:140
		qw422016.N().S(`","format": 	"`)
//line in_param.qtpl:141
		t.StreamFormat(qw422016)
//line in_param.qtpl:141
		qw422016.N().S(`"`)
//line in_param.qtpl:142
	default:
//line in_param.qtpl:142
		qw422016.N().S(`"`)
//line in_param.qtpl:142
		qw422016.E().V(param.Type)
//line in_param.qtpl:142
		qw422016.N().S(`","format": 	"`)
//line in_param.qtpl:143
		qw422016.E().V(param.Type)
//line in_param.qtpl:143
		qw422016.N().S(`"`)
//line in_param.qtpl:144
	}
//line in_param.qtpl:145
}

//line in_param.qtpl:145
func WriteSchema(qq422016 qtio422016.Writer, param InParam) {
//line in_param.qtpl:145
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:145
	StreamSchema(qw422016, param)
//line in_param.qtpl:145
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:145
}

//line in_param.qtpl:145
func Schema(param InParam) string {
//line in_param.qtpl:145
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:145
	WriteSchema(qb422016, param)
//line in_param.qtpl:145
	qs422016 := string(qb422016.B)
//line in_param.qtpl:145
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:145
	return qs422016
//line in_param.qtpl:145
}

//line in_param.qtpl:146
func StreamSecurity(qw422016 *qt422016.Writer, desc string) {
//line in_param.qtpl:146
	qw422016.N().S(`"security": ["auth":  "JWT"]`)
//line in_param.qtpl:150
}

//line in_param.qtpl:150
func WriteSecurity(qq422016 qtio422016.Writer, desc string) {
//line in_param.qtpl:150
	qw422016 := qt422016.AcquireWriter(qq422016)
//line in_param.qtpl:150
	StreamSecurity(qw422016, desc)
//line in_param.qtpl:150
	qt422016.ReleaseWriter(qw422016)
//line in_param.qtpl:150
}

//line in_param.qtpl:150
func Security(desc string) string {
//line in_param.qtpl:150
	qb422016 := qt422016.AcquireByteBuffer()
//line in_param.qtpl:150
	WriteSecurity(qb422016, desc)
//line in_param.qtpl:150
	qs422016 := string(qb422016.B)
//line in_param.qtpl:150
	qt422016.ReleaseByteBuffer(qb422016)
//line in_param.qtpl:150
	return qs422016
//line in_param.qtpl:150
}
